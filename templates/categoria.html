{% extends 'layout.html' %} {% block main %}

<section id="compras">
  <div id="comprasCabecalho">
    <h2 class="paginaTitulo">Categorias</h2>
  </div>
  <button id="btnAbrirModalCategoria" class="botaoPrimario">
    <img src="{{ url_for('static', filename='assets/icons/novo.svg') }}" alt="novo.svg" />Nova Categoria
  </button>

  <h3 class="tituloTabela">Categorias Registradas</h3>

  <div id="controlesCategorias">
    <table id="tabelaCategorias">
      <thead>
        <tr class="tabelaCabecalho">
          <th>Id</th>
          <th>Nome</th>
          <th>Descrição</th>
          <th>Status</th>
          <th>Ação</th>
        </tr>
      </thead>
      <tbody>

        {% for categoria in categorias %}
        <tr>
          <td>{{categoria['id']}}</td>
          <td>{{categoria['nome']}}</td>
          <td>{{categoria['descricao']}}</td>
          <td>{{ 'Ativo' if categoria['ativo'] == 1 else 'Inativo'}}</td>
          <td>
            <button class="botoesDecisao btnAbrirAlterarCategoria" href="" data-id="{{ categoria['id'] }}">
              <img src="/static/assets/icons/editar.svg" alt="editar.svg" />
            </button>
            {% if categoria['ativo'] == 1 %}
            <a class="botoesDecisao"
              href="{{url_for('categoria.inativar_categoria',id=categoria['id'])}}">
              <img src="/static/assets/icons/inativar.svg" alt="inativar.svg" />
            </a>
            {% else %}
            <a class="botoesDecisao"
              href="{{url_for('categoria.reativar_categoria',id=categoria['id'])}}">
              <img src="/static/assets/icons/reativar.svg" alt="reativar.svg" />
            </a>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
</section>

<dialog id="modalCadastroCategoria">
  <form id="formCadastroCategoria" method="POST" action="/categoria/cadastrar">
    <div class="modalCabecalho">
      <h2 class="tituloModal">Cadastrar Categoria</h2>
      <button
        type="button"
        aria-label="fecharFormulario"
        id="botaoFecharCategoria"
        class="botaoFecharModal"
      >
        <img
          src="{{ url_for('static', filename='assets/icons/fechar.svg') }}"
          alt="fechar.svg"
        />
      </button>
    </div>

    <label for="nomeCategoria">Nome da Categoria</label>
    <input
      type="text"
      id="nomeCategoria"
      name="nomeCategoria"
      placeholder="Digite o nome da categoria..."
      required
    />

    <label for="descricaoCategoria">Descrição</label>
    <textarea
      id="descricaoCategoria"
      name="descricaoCategoria"
      placeholder="Digite a descrição da categoria..."
      rows="3"
    ></textarea>

    <menu>
      <button type="submit" class="botaoPrimario">Salvar</button>
      <button type="button" id="botaoCancelarCategoria">Cancelar</button>
    </menu>
  </form>
</dialog>

<!-- modal de editar categoria -->
<dialog id="modalAlterarCategoria">
  <form id="formAlterarCategoria" method="POST" action="/categoria/alterar">
    <div class="modalCabecalho">
      <h2 class="tituloModal">Editar Categoria</h2>

      <button
        type="button"
        aria-label="Fechar formulário"
        id="botaoFecharAlterarCategoria"
      >
        <img
          src="{{ url_for('static', filename='assets/icons/fechar.svg')}}"
          alt="fechar.svg"
        />
      </button>
    </div>

    <input type="hidden" id="idAlterar" name="id" />

    <label for="nomeCategoria">Nome da Categoria</label>
    <input
      type="text"
      id="nomeAlterar"
      name="nomeCategoria"
      placeholder="Digite o nome da categoria..."
      required
    />

    <label for="descricaoCategoria">Descrição</label>
    <textarea
      id="descricaoAlterar"
      name="descricaoCategoria"
      placeholder="Digite a descrição da categoria..."
      rows="3"
    ></textarea>

    <menu>
      <button type="submit" class="botaoPrimario">Salvar</button>
      <button type="button" id="botaoAlterarCategoria">Cancelar</button>
    </menu>
  </form>
</dialog>

{% endblock %} {% block javascript %}
<script
  type="module"
  src="{{ url_for('static', filename='js/categoria.js') }}"
></script>
{% endblock %}

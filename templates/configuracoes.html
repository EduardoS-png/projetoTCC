{% extends 'layout.html' %}

{% block main %}
<section id="modalconfiguracao">
  <div id="configuracaoCabecalho">
    <h2 class="paginaTitulo">Configuração</h2>
  </div>

  <div id="controlesInventario">
    <button id="btnAbrirModalConfiguracao" class="botaoPrimario">
      <img src="{{ url_for('static', filename='assets/icons/novo.svg') }}" alt="novo.svg" />Novo Usuário
    </button>

    <div class="filtros">
      <input type="text" id="filtroNome" placeholder="Filtrar por nome..." />
    </div>
  </div>

  <h3 class="tituloTabela">Usuários Registrados</h3>
  <div class="table-container">
    <table id="tabelaOperacoes">
      <thead>
        <tr class="tabelaCabecalho">
          <th>ID</th>
          <th>Nome</th>
          <th>Email</th>
          <th>Senha</th>
          <th>Status</th>
          <th>Ação</th>
        </tr>
      </thead>
      <tbody>
        {% for configuracao in configuracoes %}
        <tr>
          <td>{{ configuracao['id'] }}</td>
          <td>{{ configuracao['nome'] }}</td>
          <td>{{ configuracao['email'] }}</td>
          <td>{{ configuracao['senha'] }}</td>
          <td title="{{ configuracao['status'] }}">{{ configuracao['status'] }}</td>
          <td>
            <button class="botoesDecisao btnAbrirEditarUsuario" data-id="{{ configuracao['id'] }}">
              <img src="/static/assets/icons/editar.svg" alt="editar.svg" />
            </button>
            <a class="botoesDecisao" href="{{ url_for('configuracao.deletar_configuracao', id=configuracao['id']) }}">
              <img src="/static/assets/icons/lixeira.svg" alt="lixeira.svg" />
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

<!-- Modal Cadastro -->
<dialog id="modalCadastroConfiguracao">
  <form id="formCadastroUsuario" method="POST" action="/configuracao/cadastrar">
    <div class="modalCabecalho">
      <h2 class="tituloModal">Cadastrar Usuário</h2>
      <button type="button" aria-label="CancelarFormulario" id="botaoFecharUsuario" class="botaoCancelarModal">
        <img src="{{ url_for('static', filename='assets/icons/fechar.svg') }}" alt="fechar.svg" />
      </button>
    </div>

    <label for="nome">Nome do Usuário</label>
    <input type="text" id="nome" name="nome" placeholder="Digite o nome do Usuário..." required />

    <label for="email">Email do Usuário</label>
    <input type="text" id="email" name="email" placeholder="Digite o email do Usuário..." required />

    <label for="senha">Senha do Usuário</label>
    <input type="text" id="senha" name="senha" placeholder="Digite a senha do Usuário..." required />

    <label for="status">Status do Usuário</label>
    <input type="text" id="status" name="status" required />

    <menu>
      <button type="submit" class="botaoPrimario">Salvar</button>
      <button type="button" id="botaoCancelarUsuario">Cancelar</button>
    </menu>
  </form>
</dialog>

<!-- Modal Editar -->
<dialog id="modalEditarUsuario">
  <form id="formEditarUsuario" method="POST" action="/configuracao/alterar">
    <div class="modalCabecalho">
      <h2 class="tituloModal">Alterar Usuário</h2>
      <button type="button" aria-label="fecharFormulario" id="botaoFecharEditarUsuario" class="botaoFecharModal">
        <img src="{{ url_for('static', filename='assets/icons/fechar.svg') }}" alt="fechar.svg" />
      </button>
    </div>

    <input type="hidden" id="idAlterar" name="id" />

    <label for="nomeAlterar">Nome do Usuário</label>
    <input type="text" id="nomeAlterar" name="nomeAlterar" required />

    <label for="emailAlterar">Email do Usuário</label>
    <input type="text" id="emailAlterar" name="emailAlterar" required />

    <label for="senhaAlterar">Senha do Usuário</label>
    <input type="text" id="senhaAlterar" name="senhaAlterar" required />

    <label for="statusAlterar">Status do Usuário</label>
    <select name="statusAlterar" id="statusAlterar" required>
      <option value="">Selecione o status</option>
      <option value="administrador">Administrador</option>
      <option value="funcionario">Funcionário</option>
    </select>

    <menu>
      <button type="submit" class="botaoPrimario">Salvar</button>
      <button type="button" id="botaoCancelarEditarUsuario">Cancelar</button>
    </menu>
  </form>
</dialog>
{% endblock %}

{% block javascript %}
<script type="module" src="{{ url_for('static', filename='js/configuracao.js') }}"></script>
{% endblock %}

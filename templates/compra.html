{% extends 'layout.html' %} {% block main %}

<section id="comprasProduto">
  <h2 class="paginaTitulo">Histórico de Compras - {{ produto.nome }}</h2>

  <div class="produtoInfoDashboard">
    <div class="infoCard codigo">
      <div class="icon"></div>
      <div class="infoText">
        <span class="infoLabel">Código Original</span>
        <span class="infoValue">{{ produto.codigo_original }}</span>
      </div>
    </div>

    <div class="infoCard categoria">
      <div class="icon"></div>
      <div class="infoText">
        <span class="infoLabel">Categoria</span>
        <span class="infoValue">{{ produto.categoria }}</span>
      </div>
    </div>

    <div
      class="infoCard status {{ 'ativo' if produto.ativo == 1 else 'inativo' }}"
    >
      <div class="icon"></div>
      <div class="infoText">
        <span class="infoLabel">Status</span>
        <span class="infoValue"
          >{{ 'Ativo' if produto.ativo == 1 else 'Inativo' }}</span
        >
      </div>
    </div>
  </div>

  <h3 class="tituloTabela">Compras registradas</h3>
  <div class="table-container">
    <table id="tabelaCompras" class="tabelaInventario">
      <thead>
        <tr class="tabelaCabecalho">
          <th>ID Compra</th>
          <th>Fornecedor</th>
          <th>Quantidade comprada</th>
          <th>Preço Unitário</th>
          <th>Total de Compra</th>
          <th>Data da Compra</th>
        </tr>
      </thead>
      <tbody>
        {% for compra in compras %}
        <tr>
          <td>{{ compra.id }}</td>
          <td>{{ compra.fornecedor }}</td>
          <td>{{ "%.2f"|format(compra.quantidade) }}</td>
          <td>R$ {{ "%.2f"|format(compra.preco_unitario) }}</td>
          <td>R$ {{ "%.2f"|format(compra.preco_compra) }}</td>
          <td>
            {% if compra.data_compra is string %} {{ compra.data_compra }} {%
            else %} {{ compra.data_compra.strftime("%d/%m/%Y") }} {% endif %}
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="6">Nenhuma compra registrada para este produto.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <a
    id="btnVoltarInventario"
    href="{{ url_for('inventario.listar_inventario') }}"
  >
    <span class="icon">&#x2B05;</span>
    Voltar ao Inventário
  </a>
</section>

{% endblock %} {% block javascript %}
<script
  type="module"
  src="{{ url_for('static', filename='js/inventario.js') }}"
></script>
{% endblock %}
